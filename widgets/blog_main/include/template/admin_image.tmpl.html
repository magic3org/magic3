/**
 * 表示データ作成用テンプレート(patTemplate)
 *
 * LICENSE: This source file is licensed under the terms of the GNU General Public License.
 *
 * @package    Magic3 Framework
 * @author     平田直毅(Naoki Hirata) <naoki@aplo.co.jp>
 * @copyright  Copyright 2006-2015 Magic3 Project.
 * @license    http://www.gnu.org/copyleft/gpl.html  GPL License
 * @version    SVN: $Id$
 * @link       http://www.magic3.org
 */
<patTemplate:tmpl name="_widget">
<script type="text/javascript">
//<![CDATA[
function updateItem(){
	if (!window.confirm('設定を更新しますか?')) return false;
	document.main.act.value='update';
	document.main.submit();
	return true;
}
function cancelItem(){
	document.main.task.value = 'entry_detail';
	document.main.submit();
	return true;
}
// 画像作成用ダイアログ表示
function createEyecatch()
{
	var dialogText = '<img src="image/aaa.jpg" id="target" alt="selected image" />';
	dialogText += '<div id="preview-pane">';
	dialogText += '<div class="preview-container">';
	dialogText += '<img src="image/aaa.jpg" class="jcrop-preview" alt="Preview" />';
	dialogText += '</div>';
	dialogText += '</div>';
		
	// ダイアログ作成
	BootstrapDialog.show({
		/*type: BootstrapDialog.TYPE_PRIMARY,*/
		title: '画像作成',
		message: dialogText,
		closable: false,
		nl2br: false,
/*		onshown: function(dialog) {
			// 起動時の処理
		},*/
		buttons: [{
			id: 'cancel',
			label: 'キャンセル',
			action: function(dialog) {
				dialog.close();
			}
		}, {
			id: 'ok',
			label: 'OK',
			cssClass: 'btn-primary',
			action: function(dialog) {
				dialog.close();
			}
		}]
	});
}
$(function() {
	m3SetConfigTable('config_area');
	
	// URL作成
	$("#{TAGID_CREATE_EYECATCH}").click(function (){
		createEyecatch();
	});
	
	// 画像アップローダー作成
//	m3CreateDragDropUploadFile('uploader_sitelogo', '{UPLOAD_URL_SITELOGO}', uploader_sitelogo_onSuccess);
//	m3CreateDragDropUploadFile('uploader_useravatar', '{UPLOAD_URL_USERAVATAR}', uploader_useravatar_onSuccess);
});
//]]>
</script>
<div class="m3config_container">
<!-- m3:ErrorMessage -->
<form method="post" name="main">
<input type="hidden" name="task" value="image" />
<input type="hidden" name="act" />
<input type="hidden" name="entryid" value="{ENTRY_ID}" />
<!-- m3:PostParam -->
<h3 class="m3config_h"><span {_HELP_IMAGE_IMAGE}>ブログ記事画像</span></h3>
<div class="m3config_h_side_buttons pull-right"><div {_HELP_IMAGE_BUTTONS}><div class="btn-group">
    <input type="button" class="button" onclick="cancelItem();" value="戻る" />
</div></div></div>
<table id="config_area">
    <tbody>
    <tr>
	    <th><span {_HELP_IMAGE_EYECATCH}>アイキャッチ画像<br />{EYECATCH_SIZE}</span><div class="pull-right">{CREATE_EYECATCH_BUTTON}</div></th>
	    <td><img id="sitelogo_preview" class="pull-left" src="{EYECATCH_URL}" /><div class="pull-right"><div id="uploader_sitelogo">{UPLOAD_AREA}</div></div></td>
	</tr>
    </tbody>
</table>
<div class="well m3config_update_buttons"><input type="button" class="button" onclick="updateItem();" value="更新" /></div>
</form>
</div>
</patTemplate:tmpl>
