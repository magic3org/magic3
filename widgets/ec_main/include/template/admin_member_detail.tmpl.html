/**
 * 表示データ作成用テンプレート(patTemplate)
 *
 * LICENSE: This source file is licensed under the terms of the GNU General Public License.
 *
 * @package    Magic3 Framework
 * @author     平田直毅(Naoki Hirata) <naoki@aplo.co.jp>
 * @copyright  Copyright 2006-2015 Magic3 Project.
 * @license    http://www.gnu.org/copyleft/gpl.html  GPL License
 * @version    SVN: $Id$
 * @link       http://www.magic3.org
 */
<patTemplate:tmpl name="_widget">
<style type="text/css">@import url({_SCRIPTS_URL}/jscalendar-1.0/calendar-win2k-1.css);</style>
<script type="text/javascript" src="{_SCRIPTS_URL}/jscalendar-1.0/calendar.js"></script>
<script type="text/javascript" src="{_SCRIPTS_URL}/jscalendar-1.0/lang/calendar-ja.js"></script>
<script type="text/javascript" src="{_SCRIPTS_URL}/jscalendar-1.0/calendar-setup.js"></script>
<script type="text/javascript">
//<![CDATA[
function addItem(){
	if (!window.confirm('会員情報を新規追加しますか?\nパスワードは自動送信されません')) return false;
	document.main.act.value = 'add';
	document.main.submit();
	return true;
}
function updateItem(){
	if (!window.confirm('会員情報を更新しますか?')) return false;
	document.main.act.value = 'update';
	document.main.submit();
	return true;
}
function delItem(){
	if (!window.confirm('会員情報を削除しますか?')) return false;
	document.main.act.value = 'delete';
	document.main.submit();
	return true;
}
function cancelItem(){
	document.main.task.value = 'member';
	document.main.submit();
	return true;
}
// パスワード送信
function sendPassword(){
	if (!window.confirm('パスワードを会員に送信しますか?')) return false;
	document.main.act.value = 'sendpassword';
	document.main.submit();
	return true;
}

$(function(){
	// テーブルを作成
	m3SetConfigTable('mainconfig');
	
<patTemplate:tmpl name="script_member_info_option" visibility="hidden">
	Calendar.setup({
		inputField  : "calenderinput",         // ID of the input field
		ifFormat    : "%Y/%m/%d",    // the date format
		button      : "calenderbutton"       // ID of the button
	});
</patTemplate:tmpl>
});

//]]>
</script>
<div class="m3config_container">
<!-- m3:ErrorMessage -->
<form method="post" name="main">
<input type="hidden" name="task" value="member_detail" />
<input type="hidden" name="act" />
<input type="hidden" name="serial" value="{SERIAL}" />
<input type="hidden" name="member_type" value="{MEMBER_TYPE}" />

<h3 class="m3config_h"><span {_HELP_MEMBER_DETAIL}>{TITLE}</span></h3>
<div class="m3config_h_side_buttons pull-right"><div class="btn-group">
<patTemplate:tmpl name="cancel_button" visibility="visible"><input type="button" class="button" onclick="cancelItem();" value="戻る" /></patTemplate:tmpl>
</div></div>

<table id="mainconfig">
    <tbody>
    <tr>
	    <th><span {_HELP_MEMBER_NO}>会員No</span></th>
	    <td width="300"><input type="text" name="member_no" value="{MEMBER_NO}" maxlength="30" {MEMBER_NO_DISABLED} /></td>
	    <th><span {_HELP_MEMBER_EMAIL}>Eメール</span></th>
	    <td><input type="text" name="email" value="{EMAIL}" maxlength="50" {EMAIL_DISABLED} /></td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_NAME}>会員名(姓・名)</span></th>
	    <td><div class="col-sm-6 m3config_item"><input type="text" name="family_name" value="{FAMILY_NAME}" maxlength="20" {FAMILY_NAME_DISABLED} /></div><div class="col-sm-6 m3config_item"><input type="text" name="first_name" value="{FIRST_NAME}" maxlength="20" {FIRST_NAME_DISABLED} /></div></td>
	    <th><span {_HELP_MEMBER_NAME_KANA}>会員名カナ(姓・名)</span></th>
	    <td><div class="col-sm-6 m3config_item"><input type="text" name="family_name_kana" value="{FAMILY_NAME_KANA}" maxlength="20" {FAMILY_NAME_KANA_DISABLED} /></div><div class="col-sm-6 m3config_item"><input type="text" name="first_name_kana" value="{FIRST_NAME_KANA}" maxlength="20" {FIRST_NAME_KANA_DISABLED} /></div></td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_ZIP}>郵便番号</span></th>
	    <td><div class="col-sm-6 m3config_item"><input type="text" name="zipcode" value="{ZIPCODE}" maxlength="10" {ZIPCODE_DISABLED} /></div></td>
	    <th><span {_HELP_MEMBER_STATE}>都道府県</span></th>
	    <td>
<div class="col-sm-6 m3config_item">
<select name="state" {STATE_DISABLED}>
<option value="0">未設定</option>
<patTemplate:tmpl name="state_list">
<option value="{VALUE}" {SELECTED}>{NAME}</option>
</patTemplate:tmpl>
</select>
</div>
	    </td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_ADD1}>住所1</span></th>
	    <td colspan="3"><input type="text" name="address" value="{ADDRESS}" maxlength="100" {ADDRESS_DISABLED} /></td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_ADD2}>住所2</span></th>
	    <td colspan="3"><input type="text" name="address2" value="{ADDRESS2}" maxlength="100" {ADDRESS2_DISABLED} /></td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_PHONE}>電話番号</span></th>
	    <td><input type="text" name="phone" value="{PHONE}" maxlength="30" {PHONE_DISABLED} /></td>
	    <th><span {_HELP_MEMBER_FAX}>FAX</span></th>
	    <td><input type="text" name="fax" value="{FAX}" maxlength="30" {FAX_DISABLED} /></td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_MOBILE}>携帯電話</span></th>
	    <td colspan="3"><input type="text" name="mobile" value="{MOBILE}" maxlength="30" {MOBILE_DISABLED} /></td>
	</tr>
<patTemplate:tmpl name="show_member_info_option" visibility="hidden">
    <tr>
	    <th><span {_HELP_MEMBER_GENDER}>性別</span></th>
	    <td>
<select name="gender" {GENDER_DISABLED}>
<option value="0" {GENDER_NONE}>未設定</option>
<option value="1" {GENDER_MALE}>男</option>
<option value="2" {GENDER_FEMALE}>女</option>
</select>
	    </td>
	    <th><span {_HELP_MEMBER_BIRTH}>生年月日</span></th>
	    <td><input type="text" id="calenderinput" name="birthday" value="{BIRTHDAY}" maxlength="15" {BIRTHDAY_DISABLED} /><button id="calenderbutton" {CALENDER_DISABLED}>カレンダー</button>
	    </td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_OTHERS}>その他</span></th>
	    <td colspan="3">現在やっているスポーツ<input type="text" name="item_sports" value="{SPORTS}" maxlength="100" readonly /></td>
	</tr>
</patTemplate:tmpl>
    <tr>
	    <th>更新者</th>
	    <td><div class="form-control-static">{UPDATE_USER}</div></td>
	    <th>更新日時</th>
	    <td><div class="form-control-static">{UPDATE_DT}</div></td>
	</tr>
    <tr>
	    <th><span {_HELP_MEMBER_PWD}>パスワード</span></th>
	    <td colspan="3">
	    <input type="button" class="button" onclick="sendPassword();" value="再作成して、メール送信" {SEND_PWD} />&nbsp;&nbsp;
	    {SEND_MESSAGE} {PWD_MESSAGE}</td>
	</tr>
    </tbody>
</table>

<div class="well m3config_update_buttons">
<patTemplate:tmpl name="delete_button" visibility="hidden">
		<!--<input type="checkbox" name="withloginuser" checked />ログインアカウントも削除&nbsp;--><input type="button" class="button" onclick="delItem();" value="削除" />
</patTemplate:tmpl>
<patTemplate:tmpl name="update_button" visibility="hidden">
		<input type="button" class="button" onclick="updateItem();" value="更新" />
</patTemplate:tmpl>
<patTemplate:tmpl name="add_button" visibility="hidden">
		<input type="button" class="button" onclick="addItem();" value="新規追加" />
</patTemplate:tmpl>
</div>

</form>
</div>
</patTemplate:tmpl>
